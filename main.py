import logging
from telegram import Update
from telegram.ext import Application, CommandHandler, ContextTypes, MessageHandler, filters

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
SPECIAL_MESSAGES = {
    "BlyaCheZaTuman": (
        "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ —Å—Ç—Ä–∞–Ω–Ω–æ —á—Ç–æ —Ç—ã –Ω–∞—à–ª–∞ –º–µ–Ω—è, –ú–∞–Ω–¥–∞–≤–æ—à–∫–∞. –í–æ–æ–±—â–µ —è —Ä–∞–¥ —á—Ç–æ —Ç—ã –Ω–∞—à–ª–∞ —Ç–æ —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –æ—Ç –º–µ–Ω—è. "
        "–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –º–µ–Ω—è —É–∂–µ –Ω–µ—Ç, –∞ –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–æ —è –≤ –æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ–π –¥–µ–ø—Ä–µ—Å—Å–∏–∏. –ù—É —Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å. "
        "–ù–µ –∑–Ω–∞—é —Å–∞–º–∞ –ª–∏ —Ç—ã –Ω–∞—à–ª–∞ –µ–≥–æ –∏–ª–∏ —Ç–µ–±–µ –µ–≥–æ –∫—Ç–æ —Ç–æ –ø–æ–∫–∞–∑–∞–ª, –Ω–æ —ç—Ç–æ –Ω–µ –≤–∞–∂–Ω–æ, –≤–µ–¥—å —Ç—ã –∑–¥–µ—Å—å. "
        "–°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ –∑–∞ –≤—Ä–µ–º—è —á—Ç–æ –º—ã –ø—Ä–æ–≤–æ–¥–∏–ª–∏ —Ç–∞–∫ –≤–µ—Å–µ–ª–æ –≤–º–µ—Å—Ç–µ. –°–ø–∞—Å–∏–±–æ –∑–∞ –≤—Å–µ. –õ—é–±–ª—é —Ç–µ–±—è!!! "
        "–ú–æ–∂–µ—Ç–µ –æ–±—â–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π —Ç—É—Ç –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ. –•–æ—Ç—è —è –≤–∞–º –Ω–µ –æ—Ç–≤–µ—á—É —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ"
    ),
    "Defic_r": (
        "–í–æ—É, —Ç—ã –Ω–∞—à–ª–∞ –º–µ–Ω—è, –ö–∏—Å–µ–ª—å. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –º–µ–Ω—è —É–∂–µ –Ω–µ—Ç –∏–ª–∏ –µ—Å—Ç—å, –Ω–æ –æ—Ç –∂–∏–≤–æ–≥–æ —Ç–æ–ª—å–∫–æ –±—å—é—â–µ–µ—Å—è —Å–µ—Ä–¥—Ü–µ. "
        "–ù–µ –∑–Ω–∞—é —Å–∞–º–∞ –ª–∏ –∏–ª–∏ —Ç–µ–±–µ –∫—Ç–æ —Ç–æ –ø–æ–∫–∞–∑–∞–ª —ç—Ç–æ–≥–æ –±–æ—Ç–∞, –Ω–æ —Å–ø–∞—Å–∏–±–æ —Ç–µ–±–µ –∑–∞ –≤—Å–µ. "
        "–¢—ã –±—ã–ª–∞ –ª—É—á—à–µ–π –∫–æ–≥–æ —è –∑–Ω–∞–ª. –≠—Ç–æ—Ç –±–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã–ª –±—ã—Ç—å –∞–Ω–æ–Ω –±–æ—Ç–æ–º. "
        "–ù–æ —Ç–∞–∫ –ø–æ–ª—É—á–∏–ª–æ—Å—å —á—Ç–æ —Ç–µ–ø–µ—Ä—å —ç—Ç–æ –±–æ—Ç –¥–ª—è –ø–æ—Å–º–µ—Ä—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∫–∏. "
        "–ú–æ–∂–µ—Ç–µ –æ–±—â–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π —Ç—É—Ç –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ. –•–æ—Ç—è —è –≤–∞–º –Ω–µ –æ—Ç–≤–µ—á—É —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ"
    ),
    "Tea_Utopia": (
        "–ü—Ä–∏–≤–µ—Ç, –î–∞—à. –Ø —Ö–æ—á—É –∏–∑–≤–∏–Ω–∏—Ç—å—Å—è –∑–∞ —Ç–æ —á—Ç–æ —Ç–∞–∫ –∏ –Ω–µ —Å–º–æ–≥ —Ç–µ–±–µ –ø–æ–º–æ—á—å –∏ –ª–∏—à—å –¥–µ–ª–∞–ª —Ç–µ–±–µ –±–æ–ª—å–Ω–æ. "
        "–ü–æ —ç—Ç–æ–º—É —É–π—Ç–∏ –±—ã–ª–æ –ª—É—á—à–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –¥–ª—è –≤—Å–µ—Ö. "
        "–°–ø–∞—Å–∏–±–æ —á—Ç–æ —Ç—ã –µ—Å—Ç—å –∏ —Ü–µ–Ω–∏ —Å–µ–±—è –≤–æ —á—Ç–æ–±—ã —Ç–æ –Ω–µ —Å—Ç–∞–ª–æ. "
        "–ú–æ–∂–µ—Ç–µ –æ–±—â–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π —Ç—É—Ç –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ. –•–æ—Ç—è —è –≤–∞–º –Ω–µ –æ—Ç–≤–µ—á—É —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ"
    ),
    "ObserverUniti": (
        "–î–∞—Ä, —è –ª—é–±–ª—é —Ç–µ–±—è. –¢—ã –∫—Ä—É—Ç–∞—è –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–ø—Ä–∞–≤–∏—à—å—Å—è —Å–æ –≤—Å–µ–º. "
        "–ú–æ–∂–µ—Ç–µ –æ–±—â–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π —Ç—É—Ç –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ. –•–æ—Ç—è —è –≤–∞–º –Ω–µ –æ—Ç–≤–µ—á—É —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ"
    ),
    "Fyhxdfty": (
        "–î—É—Ä–∞–∫, —Å–∞–º —Å–µ–±–µ –ø–∏—à–µ—à—å. "
        
    )
}

# –û–±—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
DEFAULT_MESSAGE = (
    "–ü—Ä–∏–≤–µ–µ–µ—Ç! –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –º–µ–Ω—è —É–∂–µ –Ω–µ—Ç. "
    "–≠—Ç–æ—Ç –±–æ—Ç —ç—Ç–æ –ø–æ—Å–º–µ—Ä—Ç–Ω–æ–µ –ø–∏—Å—å–º–æ –¥–ª—è –¥–æ—Ä–æ–≥–∏—Ö –º–Ω–µ –ª—é–¥–µ–π. "
    "–í—Ä—è—Ç–ª–∏ –æ–Ω–∏ –Ω–∞–π–¥—É—Ç –µ–≥–æ, –Ω–æ –ø–æ–ø—ã—Ç–∫–∞ —è–≤–Ω–æ –Ω–µ –ø—ã—Ç–∫–∞. "
    "–ú–æ–∂–µ—Ç–µ –æ–±—â–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π —Ç—É—Ç –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ. –•–æ—Ç—è —è –≤–∞–º –Ω–µ –æ—Ç–≤–µ—á—É —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ"
)

# ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Fyhxdfty –¥–ª—è –ø–µ—Ä–µ—Å—ã–ª–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
ADMIN_ID = None  # –ë—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    username = user.username if user.username else ""
    
    # –ï—Å–ª–∏ —ç—Ç–æ Fyhxdfty, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ ID
    global ADMIN_ID
    if username == "Fyhxdfty":
        ADMIN_ID = user.id
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    if username in SPECIAL_MESSAGES:
        message = SPECIAL_MESSAGES[username]
    else:
        message = DEFAULT_MESSAGE
    
    await update.message.reply_text(message)

async def forward_all_messages(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    message = update.message
    
    # –ù–µ –ø–µ—Ä–µ—Å—ã–ª–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —Å–∞–º–æ–≥–æ Fyhxdfty
    if message.text.startswith('/') or user.username == "Fyhxdfty":
        return
    
    if ADMIN_ID:
        try:
            # –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            user_link = f"tg://user?id={user.id}"
            forward_text = (
                f"üì® –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç [{user.full_name}]({user_link}):\n\n"
                f"{message.text}"
            )
            
            await context.bot.send_message(
                chat_id=ADMIN_ID,
                text=forward_text,
                parse_mode="Markdown"
            )
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø–µ—Ä–µ—Å—ã–ª–∫–∏: {e}")

def main():
    # –£–∫–∞–∂–∏—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
    TOKEN = "8090962536:AAFt-xEnXTofJ2lKQZ0-K3HgEjyFnQmS7xo"
    
    application = Application.builder().token(TOKEN).build()
    
    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    application.add_handler(CommandHandler("start", start))
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, forward_all_messages))
    
    # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
    application.run_polling()
    logger.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –æ–∂–∏–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π...")

if __name__ == '__main__':
    main()
